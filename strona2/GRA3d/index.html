<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>GRA3d — Placeholder</title>
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
  <div class="container">
    <header class="topbar header">
      <div class="topbar-inner">
        <div class="brand"><div class="logo">MS</div><div class="brand-text"><h1>GRA3d</h1><div class="small-muted">Strona gry 3D (placeholder)</div></div></div>
        <nav class="nav"><a href="../index.html">Home</a></nav>
        <div class="top-actions"><a class="btn" href="../games.html">Powrót do gier</a></div>
      </div>
    </header>

    <main class="content card" id="game-root">
      <h2>GRA3d — 3D FPS/RPG (plik lokalny)</h2>
      <p><strong>Instrukcje:</strong></p>
      <ul>
        <li>Otwórz tę stronę w nowej karcie (file://...) lub uruchom lokalny serwer.</li>
        <li>Kliknij na canvas, aby zablokować kursor (pointer lock) i sterować myszką.</li>
        <li>Poruszanie: <kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd>. Skok: <kbd>Spacja</kbd>.</li>
        <li>Strzelanie: kliknięcie lewym przyciskiem myszy.</li>
        <li>Cel: pokonaj wrogów (patrolują, gonią gracza). Masz pasek życia i XP.</li>
        <li>Jeśli chcesz, żeby gra była szybciej, uruchom prosty serwer (np. `python -m http.server`).</li>
      </ul>
      <div class="canvas-wrap">
        <canvas id="game-canvas" tabindex="0" aria-label="GRA3d Canvas"></canvas>

        <div id="crosshair" aria-hidden="true"></div>

        <div id="hud">
          <div id="hp">HP: <span id="hp-val">100</span></div>
          <div id="xp">XP: <span id="xp-val">0</span></div>
        </div>

        <div id="telemetry" aria-hidden="true">
          <div><strong>Pos</strong> X:<span id="pos-x">0</span> Y:<span id="pos-y">0</span> Z:<span id="pos-z">0</span></div>
          <div><strong>Cam</strong> Yaw:<span id="yaw">0</span>° Pitch:<span id="pitch">0</span>°</div>
          <div><strong>Enemies</strong> Alive:<span id="enemies">0</span></div>
          <div><strong>FPS</strong> <span id="fps">0</span></div>
          <div><strong>Lock</strong> <span id="plock">no</span></div>
        </div>

        <!-- Chat overlay (press / to open) -->
        <div id="chat" aria-hidden="false">
          <div id="chat-log" role="log" aria-live="polite"></div>
          <input id="chat-input" type="text" placeholder="Napisz wiadomość i naciśnij ENTER (ESC zamyka)">
        </div>
      </div>
    </main>
  </div>
  <script type="module" src="./main.js"></script>
  <style>
  /* minimal HUD styles - overlay inside canvas area */
  .canvas-wrap{position:relative;width:100%;height:70vh}
  #game-canvas{width:100%;height:100%;display:block;border-radius:8px;background:#000}
  #hud{position:absolute;left:12px;top:12px;color:white;font-weight:600;z-index:20;background:rgba(0,0,0,0.25);padding:6px;border-radius:6px}
  #telemetry{position:absolute;right:12px;top:12px;color:white;background:rgba(0,0,0,0.35);padding:8px;border-radius:6px;font-size:13px;line-height:1.35;z-index:20;min-width:140px}
  #telemetry div{margin-bottom:6px}
  #crosshair{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:24px;height:24px;z-index:20;pointer-events:none}
  #crosshair:before,#crosshair:after{content:'';position:absolute;background:#9b7cff}
  #crosshair:before{left:50%;top:0;width:2px;height:100%;transform:translateX(-50%)}
  #crosshair:after{top:50%;left:0;height:2px;width:100%;transform:translateY(-50%)}
  #hp, #xp{margin-bottom:6px}

  /* chat */
  #chat{position:absolute;left:12px;bottom:12px;z-index:30;max-width:46%;color:white;font-size:13px}
  #chat #chat-log{max-height:30vh;overflow:auto;background:rgba(0,0,0,0.35);padding:8px;border-radius:6px;margin-bottom:6px}
  #chat .chat-msg{margin-bottom:6px;white-space:pre-wrap}
  #chat #chat-input{display:none;width:100%;box-sizing:border-box;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.03);color:white}
  #chat.open #chat-input{display:block}
  #chat kbd{background:rgba(255,255,255,0.06);padding:2px 6px;border-radius:4px;font-weight:700}
  #chat .chat-system{color:#9bc7ff;font-style:italic;margin-bottom:6px}
  @media (max-width:600px){
    #chat{max-width:86%}
  }
  /* ensure overlays scale on small screens */
  @media (max-width:600px){
    #telemetry{font-size:12px;padding:6px}
    #crosshair{width:18px;height:18px}
  }
  </style>
    </main>
  </div>
</body>
</html>